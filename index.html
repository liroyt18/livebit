function connectLive() {
    const user = document.getElementById('log-user').value;
    
    // בדיקה אם השרת מחובר
    if (!socket.connected) {
        Swal.fire({
            icon: 'warning',
            title: 'SERVER WAKING UP',
            text: 'Please wait 10 seconds and try again.',
            confirmButtonColor: '#00e5ff'
        });
        return;
    }

    // הודעת טעינה בזמן החיבור
    Swal.fire({
        title: 'CONNECTING...',
        text: 'Checking if you are live on TikTok',
        allowOutsideClick: false,
        didOpen: () => { Swal.showLoading(); }
    });

    // שליחת בקשה לשרת
    socket.emit('joinRoom', user.replace('@', ''));
}

// הצלחה - אנימציית V ירוק
socket.on('connected', () => {
    Swal.fire({
        icon: 'success',
        title: 'CONNECTED SUCCESSFULLY!',
        text: 'LiveBIT is now synced with your TikTok.',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true
    });
});

// כישלון - אנימציית X אדום
socket.on('error', (err) => {
    Swal.fire({
        icon: 'error',
        title: 'CONNECTION FAILED',
        text: 'Are you sure you are LIVE? Check your TikTok and try again.',
        confirmButtonText: 'TRY AGAIN',
        confirmButtonColor: '#ff2d55'
    });
});
