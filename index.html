<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>LiveBIT Elite Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --neon: #00e5ff; --red: #ff2d55; --gold: #ffcc00; --purple: #8a2be2; --bg: #0d0d15; --card: #161625; --green: #00ff88; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; height: 100vh; overflow: hidden; }

        /* 住  - 转 专 */
        #login-screen { position: fixed; inset: 0; background: #0d0d15; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .login-title { color: var(--neon); font-size: 32px; font-weight: 900; margin-bottom: 30px; }
        .login-input { width: 340px; padding: 15px; background: white; border: none; border-radius: 12px; margin-bottom: 15px; color: #333; font-size: 16px; }
        .btn-login { background: var(--neon); color: black; border: none; padding: 15px 60px; border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 18px; }

        /* 砖专 - 驻 爪 住 145845 */
        #admin-panel { display: none; width: 100%; height: 100%; display: grid; grid-template-columns: 280px 1fr 280px; gap: 10px; padding: 15px; box-sizing: border-box; }
        .panel { background: #11111d; border-radius: 10px; padding: 15px; position: relative; }
        
        .header-box { border: 2px solid var(--gold); border-radius: 8px; padding: 10px; text-align: center; margin-bottom: 15px; }
        .timer-val { font-size: 110px; font-weight: 900; text-align: center; margin: 20px 0; }
        .snipe-trigger { color: var(--red); text-align: center; font-weight: bold; font-size: 14px; margin-bottom: 5px; }

        /* 驻转专 驻 转 */
        .btn-start { background: var(--neon); color: black; width: 100%; padding: 15px; border-radius: 8px; border: none; font-weight: 900; margin-bottom: 10px; }
        .btn-reset { background: #333; color: white; flex: 1; padding: 15px; border-radius: 8px; border: none; font-weight: 900; }
        .btn-snipe { background: var(--purple); color: white; flex: 1; padding: 15px; border-radius: 8px; border: none; font-weight: 900; }
        .btn-live { background: transparent; color: var(--green); border: 2px solid var(--green); width: 100%; padding: 12px; border-radius: 8px; font-weight: 900; margin-top: 10px; }
        
        .copy-link { background: transparent; border: 1px solid var(--neon); color: var(--neon); font-size: 9px; padding: 4px 8px; cursor: pointer; margin-top: 10px; display: inline-block; }

        /* 转爪转 砖专 砖拽驻 */
        .view-only #admin-panel { background: transparent !important; grid-template-columns: 1fr; }
        .view-only .panel:not(.center-p), .view-only .btn-start, .view-only .btn-reset, .view-only .btn-snipe, .view-only .btn-live { display: none !important; }
        .view-only .center-p { background: transparent !important; }
    </style>
</head>
<body id="body-tag">

    <div id="login-screen">
        <div class="login-title">LiveBIT Login</div>
        <input type="text" class="login-input" id="user" placeholder="TikTok Username">
        <input type="password" class="login-input" placeholder="Password">
        <button class="btn-login" onclick="login()">CONNECT</button>
    </div>

    <div id="admin-panel">
        <div class="panel">
            <h4 style="color:var(--red); text-align:center;">TOP 10 LIKERS</h4>
            <div id="likers"></div>
            <div class="copy-link" onclick="copy('likers')">COPY LIKERS URL</div>
        </div>

        <div class="panel center-p">
            <div class="header-box">
                <div style="color:var(--gold); font-size:10px;"> BIGGEST GIFTER</div>
                <div style="font-weight:900;">Waiting...</div>
            </div>
            
            <div class="snipe-trigger">Snipe Trigger: 20s</div>
            <div class="timer-val" id="timer">01:00</div>
            
            <button class="btn-start" onclick="start()">START / PAUSE</button>
            <div style="display:flex; gap:10px;">
                <button class="btn-reset" onclick="reset()">RESET</button>
                <button class="btn-snipe">SNIPE DELAY</button>
            </div>
            <button class="btn-live">CONNECT TO YOUR LIVE</button>
        </div>

        <div class="panel">
            <h4 style="color:var(--gold); text-align:center;">TOP 3 GIFTERS</h4>
            <div id="gifters"></div>
            <div class="copy-link" onclick="copy('timer')">COPY OVERLAY URL</div>
        </div>
    </div>

    <script>
        const sync = new BroadcastChannel('livebit_sync');
        let time = 60, running = false, timerId;

        // 拽   爪 砖专 (TikTok Studio)
        if (window.location.search.includes('view=timer')) {
            document.getElementById('body-tag').classList.add('view-only');
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'grid';
        }

        function login() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'grid';
        }

        function start() {
            if (running) { clearInterval(timerId); running = false; }
            else {
                running = true;
                timerId = setInterval(() => {
                    if (time > 0) { time--; update(); }
                }, 1000);
            }
        }

        function update() {
            const m = Math.floor(time / 60), s = time % 60;
            const str = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            document.getElementById('timer').innerText = str;
            sync.postMessage(str); // 砖 拽拽 住
        }

        sync.onmessage = (e) => { document.getElementById('timer').innerText = e.data; };

        function reset() { clearInterval(timerId); running = false; time = 60; update(); }
        function copy(t) { alert("URL Copied!"); }

        const f = (id, n) => {
            let h = ""; for(let i=1; i<=n; i++) h += `<div style="display:flex; justify-content:space-between; font-size:12px; padding:8px 0; border-bottom:1px solid #222;"><span>${i}. ---</span><span style="color:var(--neon)">0</span></div>`;
            document.getElementById(id).innerHTML = h;
        };
        f('likers', 10); f('gifters', 3);
    </script>
</body>
</html>
