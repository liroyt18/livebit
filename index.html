<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>LiveBIT Elite - Auction Overlay</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root { --neon: #00e5ff; --red: #ff2d55; --gold: #ffcc00; --bg: #080810; --purple: #a020f0; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; height: 100vh; overflow: hidden; }

        /* 转爪转 -Auction 拽拽 住 */
        #auction-overlay {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; width: 100%; background: transparent;
        }

        .overlay-card {
            background: rgba(10, 10, 20, 0.9);
            border: 3px solid var(--neon);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 0 25px var(--neon), inset 0 0 15px rgba(0, 229, 255, 0.2);
            min-width: 400px;
        }

        .top-title {
            color: var(--neon);
            font-size: 28px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--neon);
        }

        /* 转 -TOP 3 专转 */
        .gifters-table {
            width: 100%;
            margin-bottom: 25px;
            border-collapse: collapse;
        }
        .gifter-row {
            display: flex; justify-content: space-between;
            padding: 12px; border-bottom: 1px solid rgba(160, 32, 240, 0.3);
            font-size: 22px; font-weight: bold; color: #eee;
        }
        .gifter-row:last-child { border-bottom: none; }
        .gifter-row span:first-child { color: var(--purple); text-shadow: 0 0 5px var(--purple); }

        /* 专 -Snipe 爪注 */
        .snipe-label {
            color: var(--red);
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 5px;
            text-shadow: 0 0 10px var(--red);
        }
        .timer-display {
            font-size: 100px;
            font-family: monospace;
            font-weight: 800;
            line-height: 1;
            color: white;
        }
        .timer-red { color: var(--red); animation: pulse 0.8s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); } }

        /* 住转专转 砖拽    爪 Overlay */
        .admin-only { display: block; }
        body.mode-auction .admin-only { display: none; }
    </style>
</head>
<body id="main-body">

    <div id="admin-interface" class="admin-only">
        <h2 style="text-align:center; color:var(--neon);">Admin Panel - Open /auction in browser for Overlay</h2>
    </div>

    <div id="auction-overlay">
        <div class="overlay-card">
            <div class="top-title">TOP 3 GIFTERS</div>
            
            <div class="gifters-table" id="overlay-gifters">
                <div class="gifter-row"><span>1. Waiting</span><span>0 </span></div>
                <div class="gifter-row"><span>2. Waiting</span><span>0 </span></div>
                <div class="gifter-row"><span>3. Waiting</span><span>0 </span></div>
            </div>

            <div class="snipe-label">SNIPE: <span id="overlay-snipe-val">20</span>s</div>
            <div id="overlay-timer" class="timer-display">01:00</div>
        </div>
    </div>

    <script>
        // 拽:  砖转砖 住 转转 注 住转 /auction?
        if (window.location.pathname.includes('auction')) {
            document.getElementById('admin-interface').style.display = 'none';
            document.body.classList.add('mode-auction');
        } else {
            document.getElementById('auction-overlay').style.display = 'none';
        }

        const socket = io("https://livebit-server.onrender.com");

        // 注  专  转 砖专转
        socket.on('updateStats', (data) => {
            // 注 -TOP 3
            if (data.gifters) {
                let html = "";
                data.gifters.slice(0,3).forEach((g, i) => {
                    html += `<div class="gifter-row"><span>${i+1}. ${g.name}</span><span>${g.coins} </span></div>`;
                });
                document.getElementById('overlay-gifters').innerHTML = html;
            }
            
            // 注 专 -Snipe
            if (data.timer) {
                document.getElementById('overlay-timer').innerText = data.timer;
                document.getElementById('overlay-snipe-val').innerText = data.snipeVal;
                if (data.isSnipe) document.getElementById('overlay-timer').classList.add('timer-red');
            }
        });
    </script>
</body>
</html>
